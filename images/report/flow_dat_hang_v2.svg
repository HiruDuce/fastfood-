<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" width="1400" height="900">
  <defs>
    <linearGradient id="bg" x1="0" y1="0" x2="1" y2="1">
      <stop offset="0%" stop-color="#eef4ff"/>
      <stop offset="100%" stop-color="#f9fbff"/>
    </linearGradient>
    <filter id="shadow" x="-20%" y="-20%" width="140%" height="140%">
      <feDropShadow dx="0" dy="2" stdDeviation="3" flood-color="#000" flood-opacity="0.15"/>
    </filter>
    <style>
      .title{font: 700 26px 'Segoe UI', Arial; fill:#173055}
      .box{fill:url(#bg); stroke:#6ea3ff; stroke-width:1.6; rx:12; filter:url(#shadow)}
      .diamond{fill:#fff7ec; stroke:#ff9f45; stroke-width:1.8; filter:url(#shadow)}
      .txt{font: 600 15px 'Segoe UI', Arial; fill:#1f355e}
      .line{stroke:#4169ff; stroke-width:1.8; marker-end:url(#arrow)}
      .label{font:600 14px 'Segoe UI', Arial; fill:#4169ff}
    </style>
    <marker id="arrow" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto" markerUnits="strokeWidth">
      <path d="M0,0 L0,6 L9,3 z" fill="#4169ff" />
    </marker>
  </defs>

  <text x="700" y="60" class="title" text-anchor="middle">Luồng đặt hàng (User)</text>

  <!-- Row 1 -->
  <rect x="90" y="120" width="360" height="70" class="box" />
  <text x="270" y="162" class="txt" text-anchor="middle">Xem sản phẩm trên index.php</text>

  <polygon class="diamond" points="590,155 650,120 710,155 650,190"/>
  <text x="650" y="160" class="txt" text-anchor="middle">Thêm giỏ hay Mua ngay?</text>

  <rect x="940" y="110" width="360" height="70" class="box" />
  <text x="1120" y="152" class="txt" text-anchor="middle">Giỏ hàng cart.php – cập nhật số lượng/xóa</text>

  <!-- Row 2 -->
  <rect x="940" y="230" width="360" height="70" class="box" />
  <text x="1120" y="272" class="txt" text-anchor="middle">Đi tới checkout.php</text>

  <polygon class="diamond" points="590,295 650,260 710,295 650,330"/>
  <text x="650" y="300" class="txt" text-anchor="middle">Form thông tin hợp lệ?</text>

  <!-- Row 3 -->
  <rect x="90" y="380" width="380" height="70" class="box" />
  <text x="280" y="422" class="txt" text-anchor="middle">Tính subtotal / discount / total</text>

  <rect x="520" y="380" width="360" height="70" class="box" />
  <text x="700" y="422" class="txt" text-anchor="middle">Tạo orders + order_items</text>

  <rect x="940" y="380" width="360" height="70" class="box" />
  <text x="1120" y="422" class="txt" text-anchor="middle">Hiển thị mã đơn | Kết quả</text>

  <rect x="940" y="490" width="360" height="70" class="box" />
  <text x="1120" y="532" class="txt" text-anchor="middle">(Nếu đã đăng nhập) Xem đơn tại my_orders.php</text>

  <!-- Edges -->
  <line x1="450" y1="155" x2="590" y2="155" class="line"/>
  <line x1="710" y1="155" x2="940" y2="145" class="line"/>
  <line x1="650" y1="190" x2="1120" y2="230" class="line"/>
  <line x1="1120" y1="180" x2="1120" y2="230" class="line"/>

  <line x1="1120" y1="300" x2="650" y2="295" class="line"/>
  <line x1="650" y1="330" x2="280" y2="380" class="line"/>
  <line x1="470" y1="415" x2="520" y2="415" class="line"/>
  <line x1="880" y1="415" x2="940" y2="415" class="line"/>
  <line x1="1120" y1="450" x2="1120" y2="490" class="line"/>

  <!-- Branch labels -->
  <text x="820" y="138" class="label">Thêm giỏ</text>
  <text x="820" y="200" class="label">Mua ngay</text>
  <text x="665" y="285" class="label">Có</text>
  <text x="1120" y="290" class="label">Không</text>
</svg>
